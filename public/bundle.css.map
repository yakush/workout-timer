{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\App.svelte",
    "..\\src\\comps\\Timer.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import { onMount } from \"svelte\";\r\n  import Timer from \"./comps/Timer.svelte\";\r\n  export let name;\r\n  let timers = [\r\n    { name: \"a\", component: null },\r\n    { name: \"b\", component: null },\r\n    { name: \"c\", component: null },\r\n    { name: \"d\", component: null },\r\n    { name: \"e\", component: null }\r\n  ];\r\n\r\n  let currentIdx;\r\n  let defaultDuration = 30;\r\n  let defaultPreCountDuration = 3;\r\n  let defaultPreCountEnabled = false;\r\n  let autoAdvance = true;\r\n\r\n  onMount(() => {\r\n    currentIdx = 0;\r\n  });\r\n\r\n  function playNext() {\r\n    timers[currentIdx].component.start();\r\n  }\r\n  function resetAll() {\r\n    timers.forEach(x => x.component.reset());\r\n    currentIdx = 0;\r\n  }\r\n\r\n  function onTimerDone(index) {\r\n    currentIdx = (currentIdx + 1) % timers.length;\r\n    if (autoAdvance && index != timers.length - 1) {\r\n      playNext();\r\n    }\r\n  }\r\n\r\n  $: labelStart = \"GO\";\r\n</script>\r\n\r\n<style>\r\n  h1 {\r\n    text-align: center;\r\n    color: purple;\r\n  }\r\n  .wrap {\r\n    /* border: 1px solid black; */\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 300px;\r\n    align-items: stretch;\r\n    padding: 10px;\r\n    margin: auto;\r\n  }\r\n  button {\r\n    border-radius: 5px;\r\n  }\r\n  .reset {\r\n    height: 50px;\r\n  }\r\n  .start {\r\n    margin-top: 10px;\r\n    height: 100px;\r\n  }\r\n  input {\r\n    text-align: center;\r\n  }\r\n  .timerContainer {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n  }\r\n  .timer {\r\n    flex: 1;\r\n  }\r\n  .timerIndicator {\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 50%;\r\n    margin-left: -20px;\r\n    border: 1px solid gray;\r\n  }\r\n  .marked {\r\n    background: gray;\r\n  }\r\n\r\n  .settings {\r\n    border: 1px solid gray;\r\n    border-radius: 4px;\r\n    margin: 5px;\r\n    padding: 5px;\r\n    /* display: flex;\r\n    flex-direction: column; */\r\n    display: grid;\r\n    grid-template: \"a a\";\r\n    grid-gap: 5px;\r\n  }\r\n  .settings>input[type=\"number\"]{\r\n    width: 100%;\r\n  }  \r\n</style>\r\n\r\n<div class=\"wrap\">\r\n  <!-- <h1>TIMER</h1> -->\r\n  <div class=\"settings\">\r\n\r\n    <label for=\"duration\">duration</label>\r\n    <input\r\n      name=\"duration\"\r\n      type=\"number\"\r\n      bind:value={defaultDuration}\r\n      placeholder=\"time in seconds\" />\r\n\r\n    <div>\r\n      <input type=\"checkbox\" bind:checked={defaultPreCountEnabled} />\r\n      precount\r\n    </div>\r\n\r\n    <input\r\n      disabled={!defaultPreCountEnabled}\r\n      name=\"duration\"\r\n      type=\"number\"\r\n      bind:value={defaultPreCountDuration}\r\n      placeholder=\"time in seconds\" />\r\n    <div style=\"grid-column: 1 / 3;\">\r\n      <input type=\"checkbox\" bind:checked={autoAdvance} />\r\n      <span>auto advance</span>\r\n    </div>\r\n  </div>\r\n\r\n  <button class=\"reset\" on:click={resetAll}>RESET</button>\r\n\r\n  {#each timers as timer, i}\r\n    <div class=\"timerContainer\">\r\n      <div class=\"timerIndicator\" class:marked={i <= currentIdx} />\r\n      <div class=\"timer\">\r\n        <Timer\r\n          clickable={false}\r\n          duration={defaultDuration}\r\n          preCount={defaultPreCountEnabled ? defaultPreCountDuration : 0}\r\n          bind:this={timers[i].component}\r\n          on:done={() => onTimerDone(i)} />\r\n      </div>\r\n    </div>\r\n  {/each}\r\n\r\n  <button class=\"start\" on:click={playNext}>{labelStart}</button>\r\n\r\n</div>\r\n",
    "<script>\r\n  import { createEventDispatcher } from \"svelte\";\r\n  const dispatch = createEventDispatcher();\r\n\r\n  export let clickable = true;\r\n  export let duration = 20;\r\n  export let preCount = 0;\r\n\r\n  let started = false;\r\n\r\n  let time = duration;\r\n  let timer;\r\n\r\n  let beep = new Audio(\"./sounds/blip.mp3\");\r\n  let tick = new Audio(\"./sounds/tick.mp3\");\r\n\r\n  $: timeLabel = duration ? Math.ceil(time).toFixed() : \"---\";\r\n  $: {\r\n    time = duration;\r\n  }\r\n\r\n  function onButton() {\r\n    console.log(clickable);\r\n    if (!clickable) return;\r\n\r\n    if (started) stop();\r\n    else start();\r\n  }\r\n\r\n  export function reset() {\r\n    stop();\r\n    time = duration;\r\n  }\r\n\r\n  export function start() {\r\n    stop();\r\n    console.log(\"stating timer\");\r\n    let startTime = Date.now() + preCount * 1000;\r\n    let last = startTime;\r\n    started = true;\r\n    let preCountTime = 0;\r\n    let lastPreCount=preCount;\r\n    timer = setInterval(() => {\r\n      if (started) {\r\n        let now = Date.now();\r\n\r\n        if (preCount > 0 && now < startTime) {\r\n          preCountTime = (startTime - now) / 1000;\r\n          time =preCountTime;\r\n          if (Math.ceil(lastPreCount) > Math.ceil(preCountTime) && preCountTime > 0) {\r\n            tick.play();\r\n          }\r\n          lastPreCount = preCountTime;          \r\n        } else {\r\n          time = duration - (now - startTime) / 1000;\r\n          if (Math.ceil(last) > Math.ceil(time) && time > 0) {\r\n            tick.play();\r\n          }\r\n          last = time;\r\n\r\n          if (time <= 0) {\r\n            beep.play();\r\n            time = 0;\r\n            stop();\r\n            dispatch(\"done\");\r\n          }\r\n        }\r\n      }\r\n    }, 10);\r\n  }\r\n  export function stop() {\r\n    clearInterval(timer);\r\n    started = false;\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .container {\r\n    padding: 5px;\r\n    user-select: none;\r\n  }\r\n  .clickable {\r\n    cursor: pointer;\r\n  }\r\n  .time {\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n\r\n    /* border: 2px solid gray; */\r\n    border-radius: 2px;\r\n    color: white;\r\n    font-weight: bold;\r\n    background: lightgray;\r\n    box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.1);\r\n\r\n    padding: 1px 5px;\r\n    text-align: center;\r\n    font-size: 25px;\r\n  }\r\n\r\n  .time.running {\r\n    background: green;\r\n  }\r\n\r\n  .time.done {\r\n    background: rosybrown;\r\n  }\r\n</style>\r\n\r\n<!-- markup (zero or more items) goes here -->\r\n<div class=\"container\" class:clickable on:click={onButton}>\r\n  <span class=\"time\" class:done={time <= 0} class:running={started}>\r\n    {timeLabel}\r\n  </span>\r\n  <!-- <button on:click={onButton}>{label}</button> -->\r\n</div>\r\n"
  ],
  "names": [],
  "mappings": "AA6CE,KAAK,eAAC,CAAC,AAEL,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,KAAK,CAAE,KAAK,CACZ,WAAW,CAAE,OAAO,CACpB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,IAAI,AACd,CAAC,AACD,MAAM,eAAC,CAAC,AACN,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,MAAM,eAAC,CAAC,AACN,MAAM,CAAE,IAAI,AACd,CAAC,AACD,MAAM,eAAC,CAAC,AACN,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,KAAK,AACf,CAAC,AACD,KAAK,eAAC,CAAC,AACL,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,eAAe,eAAC,CAAC,AACf,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,MAAM,eAAC,CAAC,AACN,IAAI,CAAE,CAAC,AACT,CAAC,AACD,eAAe,eAAC,CAAC,AACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,GAAG,CAClB,WAAW,CAAE,KAAK,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AACxB,CAAC,AACD,OAAO,eAAC,CAAC,AACP,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,SAAS,eAAC,CAAC,AACT,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CACX,OAAO,CAAE,GAAG,CAGZ,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,KAAK,CACpB,QAAQ,CAAE,GAAG,AACf,CAAC,AACD,wBAAS,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,gBAAC,CAAC,AAC7B,KAAK,CAAE,IAAI,AACb,CAAC;ACtBD,UAAU,cAAC,CAAC,AACV,OAAO,CAAE,GAAG,CACZ,WAAW,CAAE,IAAI,AACnB,CAAC,AACD,UAAU,cAAC,CAAC,AACV,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,KAAK,cAAC,CAAC,AACL,OAAO,CAAE,YAAY,CACrB,UAAU,CAAE,UAAU,CACtB,KAAK,CAAE,IAAI,CAGX,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,CACZ,WAAW,CAAE,IAAI,CACjB,UAAU,CAAE,SAAS,CACrB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAE1C,OAAO,CAAE,GAAG,CAAC,GAAG,CAChB,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,AACjB,CAAC,AAED,KAAK,QAAQ,cAAC,CAAC,AACb,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,KAAK,KAAK,cAAC,CAAC,AACV,UAAU,CAAE,SAAS,AACvB,CAAC"
}