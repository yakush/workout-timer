var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function s(){return d(" ")}function f(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function m(t){return""===t?void 0:+t}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}function b(t,e){(null!=e||t.value)&&(t.value=e)}function v(t,e,n){t.classList[n?"add":"remove"](e)}let $;function g(t){$=t}function C(t){(function(){if(!$)throw new Error("Function called outside component initialization");return $})().$$.on_mount.push(t)}function _(){const t=$;return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,o)})}}}const x=[],k=[],y=[],E=[],P=Promise.resolve();let D=!1;function w(t){y.push(t)}function q(){const t=new Set;do{for(;x.length;){const t=x.shift();g(t),A(t.$$)}for(;k.length;)k.pop()();for(let e=0;e<y.length;e+=1){const n=y[e];t.has(n)||(n(),t.add(n))}y.length=0}while(x.length);for(;E.length;)E.pop()();D=!1}function A(t){t.fragment&&(t.update(t.dirty),r(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(w))}const I=new Set;let L;function S(t,e){t&&t.i&&(I.delete(t),t.i(e))}function M(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),L.c.push(()=>{I.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function N(t,n,a){const{fragment:u,on_mount:i,on_destroy:l,after_update:c}=t.$$;u.m(n,a),w(()=>{const n=i.map(e).filter(o);l?l.push(...n):r(n),t.$$.on_mount=[]}),c.forEach(w)}function O(t,e){t.$$.fragment&&(r(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function B(t,e){t.$$.dirty||(x.push(t),D||(D=!0,P.then(q)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function j(e,o,a,u,i,l){const c=$;g(e);const d=o.props||{},s=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var p;s.ctx=a?a(e,d,(t,n,r=n)=>(s.ctx&&i(s.ctx[t],s.ctx[t]=r)&&(s.bound[t]&&s.bound[t](r),f&&B(e,t)),n)):d,s.update(),f=!0,r(s.before_update),s.fragment=u(s.ctx),o.target&&(o.hydrate?s.fragment.l((p=o.target,Array.from(p.childNodes))):s.fragment.c(),o.intro&&S(e.$$.fragment),N(e,o.target,o.anchor),q()),g(c)}class T{$destroy(){O(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function F(e){var n,r,o,a;return{c(){n=c("div"),r=c("span"),o=d(e.timeLabel),p(r,"class","time svelte-cke364"),v(r,"done",e.time<=0),v(r,"running",e.started),p(n,"class","container svelte-cke364"),v(n,"clickable",e.clickable),a=f(n,"click",e.onButton)},m(t,e){i(t,n,e),u(n,r),u(r,o)},p(t,e){t.timeLabel&&h(o,e.timeLabel),t.time&&v(r,"done",e.time<=0),t.started&&v(r,"running",e.started),t.clickable&&v(n,"clickable",e.clickable)},i:t,o:t,d(t){t&&l(n),a()}}}function G(t,e,n){const r=_();let o,a,{clickable:u=!0,duration:i=20,preCount:l=0}=e,c=!1,d=i,s=new Audio("./sounds/blip.mp3"),f=new Audio("./sounds/tick.mp3");function p(){m(),console.log("stating timer");let t=Date.now()+1e3*l,e=t;n("started",c=!0);let a=0,u=l;o=setInterval(()=>{if(c){let o=Date.now();l>0&&o<t?(n("time",d=a=(t-o)/1e3),Math.ceil(u)>Math.ceil(a)&&a>0&&f.play(),u=a):(n("time",d=i-(o-t)/1e3),Math.ceil(e)>Math.ceil(d)&&d>0&&f.play(),e=d,d<=0&&(s.play(),n("time",d=0),m(),r("done")))}},10)}function m(){clearInterval(o),n("started",c=!1)}return t.$set=(t=>{"clickable"in t&&n("clickable",u=t.clickable),"duration"in t&&n("duration",i=t.duration),"preCount"in t&&n("preCount",l=t.preCount)}),t.$$.update=((t={duration:1,time:1})=>{t.duration&&n("time",d=i),(t.duration||t.time)&&n("timeLabel",a=i?Math.ceil(d).toFixed():"---")}),{clickable:u,duration:i,preCount:l,started:c,time:d,onButton:function(){console.log(u),u&&(c?m():p())},reset:function(){m(),n("time",d=i)},start:p,stop:m,timeLabel:a}}class z extends T{constructor(t){super(),j(this,t,G,F,a,["clickable","duration","preCount","reset","start","stop"])}get reset(){return this.$$.ctx.reset}get start(){return this.$$.ctx.start}get stop(){return this.$$.ctx.stop}}function R(t,e,n){const r=Object.create(t);return r.timer=e[n],r.i=n,r}function H(t){var e,n,r,o,a,d=t.i;const f=()=>t.timer_binding(b,d),m=()=>t.timer_binding(null,d);let h={clickable:!1,duration:t.defaultDuration,preCount:t.defaultPreCountEnabled?t.defaultPreCountDuration:0};var b=new z({props:h});return f(),b.$on("done",function(){return t.done_handler(t)}),{c(){e=c("div"),n=c("div"),r=s(),o=c("div"),b.$$.fragment.c(),p(n,"class","timerIndicator svelte-1vrs13q"),v(n,"marked",t.i<=t.currentIdx),p(o,"class","timer svelte-1vrs13q"),p(e,"class","timerContainer svelte-1vrs13q")},m(t,l){i(t,e,l),u(e,n),u(e,r),u(e,o),N(b,o,null),a=!0},p(e,r){t=r,e.currentIdx&&v(n,"marked",t.i<=t.currentIdx),d!==t.i&&(m(),d=t.i,f());var o={};e.defaultDuration&&(o.duration=t.defaultDuration),(e.defaultPreCountEnabled||e.defaultPreCountDuration)&&(o.preCount=t.defaultPreCountEnabled?t.defaultPreCountDuration:0),b.$set(o)},i(t){a||(S(b.$$.fragment,t),a=!0)},o(t){M(b.$$.fragment,t),a=!1},d(t){t&&l(e),m(),O(b)}}}function J(t){var e,n,o,a,m,v,$,g,C,_,x,k,y,E,P,D,w,q,A,I,N,O,B,j,T,F=!1,G=!1;function z(){F=!0,t.input0_input_handler.call(m)}function J(){G=!0,t.input2_input_handler.call(x)}let K=t.timers,Q=[];for(let e=0;e<K.length;e+=1)Q[e]=H(R(t,K,e));const U=t=>M(Q[t],1,1,()=>{Q[t]=null});return{c(){e=c("div"),n=c("div"),(o=c("label")).textContent="duration",a=s(),m=c("input"),v=s(),$=c("div"),g=c("input"),C=d("\r\n      precount"),_=s(),x=c("input"),y=s(),E=c("div"),P=c("input"),D=s(),(w=c("span")).textContent="auto advance",q=s(),(A=c("button")).textContent="RESET",I=s();for(let t=0;t<Q.length;t+=1)Q[t].c();var r,u,i;N=s(),O=c("button"),B=d(t.labelStart),p(o,"for","duration"),p(m,"name","duration"),p(m,"type","number"),p(m,"placeholder","time in seconds"),p(m,"class","svelte-1vrs13q"),p(g,"type","checkbox"),p(g,"class","svelte-1vrs13q"),x.disabled=k=!t.defaultPreCountEnabled,p(x,"name","duration"),p(x,"type","number"),p(x,"placeholder","time in seconds"),p(x,"class","svelte-1vrs13q"),p(P,"type","checkbox"),p(P,"class","svelte-1vrs13q"),r="grid-column",u="1 / 3",E.style.setProperty(r,u,i?"important":""),p(n,"class","settings svelte-1vrs13q"),p(A,"class","reset svelte-1vrs13q"),p(O,"class","start svelte-1vrs13q"),p(e,"class","wrap svelte-1vrs13q"),T=[f(m,"input",z),f(g,"change",t.input1_change_handler),f(x,"input",J),f(P,"change",t.input3_change_handler),f(A,"click",t.resetAll),f(O,"click",t.playNext)]},m(r,l){i(r,e,l),u(e,n),u(n,o),u(n,a),u(n,m),b(m,t.defaultDuration),u(n,v),u(n,$),u($,g),g.checked=t.defaultPreCountEnabled,u($,C),u(n,_),u(n,x),b(x,t.defaultPreCountDuration),u(n,y),u(n,E),u(E,P),P.checked=t.autoAdvance,u(E,D),u(E,w),u(e,q),u(e,A),u(e,I);for(let t=0;t<Q.length;t+=1)Q[t].m(e,null);u(e,N),u(e,O),u(O,B),j=!0},p(t,n){if(!F&&t.defaultDuration&&b(m,n.defaultDuration),F=!1,t.defaultPreCountEnabled&&(g.checked=n.defaultPreCountEnabled),!G&&t.defaultPreCountDuration&&b(x,n.defaultPreCountDuration),G=!1,j&&!t.defaultPreCountEnabled||k===(k=!n.defaultPreCountEnabled)||(x.disabled=k),t.autoAdvance&&(P.checked=n.autoAdvance),t.defaultDuration||t.defaultPreCountEnabled||t.defaultPreCountDuration||t.timers||t.currentIdx){let o;for(K=n.timers,o=0;o<K.length;o+=1){const r=R(n,K,o);Q[o]?(Q[o].p(t,r),S(Q[o],1)):(Q[o]=H(r),Q[o].c(),S(Q[o],1),Q[o].m(e,N))}for(L={r:0,c:[],p:L},o=K.length;o<Q.length;o+=1)U(o);L.r||r(L.c),L=L.p}j&&!t.labelStart||h(B,n.labelStart)},i(t){if(!j){for(let t=0;t<K.length;t+=1)S(Q[t]);j=!0}},o(t){Q=Q.filter(Boolean);for(let t=0;t<Q.length;t+=1)M(Q[t]);j=!1},d(t){t&&l(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(Q,t),r(T)}}}function K(t,e,n){let r,{name:o}=e,a=[{name:"a",component:null},{name:"b",component:null},{name:"c",component:null},{name:"d",component:null},{name:"e",component:null}],u=30,i=3,l=!1,c=!0;function d(){a[r].component.start()}function s(t){n("currentIdx",r=(r+1)%a.length),c&&t!=a.length-1&&d()}C(()=>{n("currentIdx",r=0)});let f;return t.$set=(t=>{"name"in t&&n("name",o=t.name)}),n("labelStart",f="GO"),{name:o,timers:a,currentIdx:r,defaultDuration:u,defaultPreCountDuration:i,defaultPreCountEnabled:l,autoAdvance:c,playNext:d,resetAll:function(){a.forEach(t=>t.component.reset()),n("currentIdx",r=0)},onTimerDone:s,labelStart:"GO",input0_input_handler:function(){u=m(this.value),n("defaultDuration",u)},input1_change_handler:function(){l=this.checked,n("defaultPreCountEnabled",l)},input2_input_handler:function(){i=m(this.value),n("defaultPreCountDuration",i)},input3_change_handler:function(){c=this.checked,n("autoAdvance",c)},timer_binding:function(t,e){a[e].component!==t&&k[t?"unshift":"push"](()=>{a[e].component=t,n("timers",a)})},done_handler:({i:t})=>s(t)}}return new class extends T{constructor(t){super(),j(this,t,K,J,a,["name"])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
