var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function s(){return d(" ")}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function p(t){return""===t?void 0:+t}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}function b(t,e){(null!=e||t.value)&&(t.value=e)}function $(t,e,n){t.classList[n?"add":"remove"](e)}let g;function v(t){g=t}function C(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}function _(){const t=g;return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,r)})}}}const x=[],k=[],y=[],E=[],P=Promise.resolve();let D=!1;function w(t){y.push(t)}function A(){const t=new Set;do{for(;x.length;){const t=x.shift();v(t),I(t.$$)}for(;k.length;)k.pop()();for(let e=0;e<y.length;e+=1){const n=y[e];t.has(n)||(n(),t.add(n))}y.length=0}while(x.length);for(;E.length;)E.pop()();D=!1}function I(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(w))}const L=new Set;let S;function M(t,e){t&&t.i&&(L.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),S.c.push(()=>{L.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function O(t,n,a){const{fragment:u,on_mount:i,on_destroy:l,after_update:c}=t.$$;u.m(n,a),w(()=>{const n=i.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]}),c.forEach(w)}function B(t,e){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function j(t,e){t.$$.dirty||(x.push(t),D||(D=!0,P.then(A)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function T(e,r,a,u,i,l){const c=g;v(e);const d=r.props||{},s=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var m;s.ctx=a?a(e,d,(t,n,o=n)=>(s.ctx&&i(s.ctx[t],s.ctx[t]=o)&&(s.bound[t]&&s.bound[t](o),f&&j(e,t)),n)):d,s.update(),f=!0,o(s.before_update),s.fragment=u(s.ctx),r.target&&(r.hydrate?s.fragment.l((m=r.target,Array.from(m.childNodes))):s.fragment.c(),r.intro&&M(e.$$.fragment),O(e,r.target,r.anchor),A()),v(c)}class F{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function G(e){var n,o,r,a;return{c(){n=c("div"),o=c("span"),r=d(e.timeLabel),m(o,"class","time svelte-cke364"),$(o,"done",e.time<=0),$(o,"running",e.started),m(n,"class","container svelte-cke364"),$(n,"clickable",e.clickable),a=f(n,"click",e.onButton)},m(t,e){i(t,n,e),u(n,o),u(o,r)},p(t,e){t.timeLabel&&h(r,e.timeLabel),t.time&&$(o,"done",e.time<=0),t.started&&$(o,"running",e.started),t.clickable&&$(n,"clickable",e.clickable)},i:t,o:t,d(t){t&&l(n),a()}}}function q(t,e,n){const o=_();let r,a,{clickable:u=!0,duration:i=20,preCount:l=0}=e,c=!1,d=i,s=new Audio("./sounds/blip.mp3"),f=new Audio("./sounds/tick.mp3");function m(){p(),console.log("stating timer");let t=Date.now()+1e3*l,e=t;n("started",c=!0);let a=0,u=l;r=setInterval(()=>{if(c){let r=Date.now();l>0&&r<t?(n("time",d=a=(t-r)/1e3),Math.ceil(u)>Math.ceil(a)&&a>0&&f.play(),u=a):(n("time",d=i-(r-t)/1e3),Math.ceil(e)>Math.ceil(d)&&d>0&&f.play(),e=d,d<=0&&(s.play(),n("time",d=0),p(),o("done")))}},10)}function p(){clearInterval(r),n("started",c=!1)}return t.$set=(t=>{"clickable"in t&&n("clickable",u=t.clickable),"duration"in t&&n("duration",i=t.duration),"preCount"in t&&n("preCount",l=t.preCount)}),t.$$.update=((t={duration:1,time:1})=>{t.duration&&n("time",d=i),(t.duration||t.time)&&n("timeLabel",a=i?Math.ceil(d).toFixed():"---")}),{clickable:u,duration:i,preCount:l,started:c,time:d,onButton:function(){console.log(u),u&&(c?p():m())},reset:function(){p(),n("time",d=i)},start:m,stop:p,timeLabel:a}}class z extends F{constructor(t){super(),T(this,t,q,G,a,["clickable","duration","preCount","reset","start","stop"])}get reset(){return this.$$.ctx.reset}get start(){return this.$$.ctx.start}get stop(){return this.$$.ctx.stop}}function R(t,e,n){const o=Object.create(t);return o.timer=e[n],o.i=n,o}function H(t){var e,n,o,r,a,d=t.i;const f=()=>t.timer_binding(b,d),p=()=>t.timer_binding(null,d);let h={clickable:!1,duration:t.defaultDuration,preCount:t.defaultPreCountEnabled?t.defaultPreCountDuration:0};var b=new z({props:h});return f(),b.$on("done",function(){return t.done_handler(t)}),{c(){e=c("div"),n=c("div"),o=s(),r=c("div"),b.$$.fragment.c(),m(n,"class","timerIndicator svelte-m7hsn4"),$(n,"marked",t.i<=t.currentIdx),m(r,"class","timer svelte-m7hsn4"),m(e,"class","timerContainer svelte-m7hsn4")},m(t,l){i(t,e,l),u(e,n),u(e,o),u(e,r),O(b,r,null),a=!0},p(e,o){t=o,e.currentIdx&&$(n,"marked",t.i<=t.currentIdx),d!==t.i&&(p(),d=t.i,f());var r={};e.defaultDuration&&(r.duration=t.defaultDuration),(e.defaultPreCountEnabled||e.defaultPreCountDuration)&&(r.preCount=t.defaultPreCountEnabled?t.defaultPreCountDuration:0),b.$set(r)},i(t){a||(M(b.$$.fragment,t),a=!0)},o(t){N(b.$$.fragment,t),a=!1},d(t){t&&l(e),p(),B(b)}}}function J(t){var e,n,r,a,p,$,g,v,C,_,x,k,y,E,P,D,w,A,I,L,O,B,j,T,F,G=!1,q=!1;function z(){G=!0,t.input0_input_handler.call(p)}function J(){q=!0,t.input2_input_handler.call(x)}let K=t.timers,Q=[];for(let e=0;e<K.length;e+=1)Q[e]=H(R(t,K,e));const U=t=>N(Q[t],1,1,()=>{Q[t]=null});return{c(){e=c("div"),n=c("div"),(r=c("label")).textContent="duration",a=s(),p=c("input"),$=s(),g=c("div"),v=c("input"),C=d("\n      precount"),_=s(),x=c("input"),y=s(),E=c("div"),P=c("input"),D=s(),(w=c("span")).textContent="auto advance",A=s(),(I=c("button")).textContent="RESET",L=s();for(let t=0;t<Q.length;t+=1)Q[t].c();var o,u,i;O=s(),B=c("button"),j=d(t.labelStart),m(r,"for","duration"),m(p,"name","duration"),m(p,"type","number"),m(p,"placeholder","time in seconds"),m(p,"class","svelte-m7hsn4"),m(v,"type","checkbox"),m(v,"class","svelte-m7hsn4"),x.disabled=k=!t.defaultPreCountEnabled,m(x,"name","duration"),m(x,"type","number"),m(x,"placeholder","time in seconds"),m(x,"class","svelte-m7hsn4"),m(P,"type","checkbox"),m(P,"class","svelte-m7hsn4"),o="grid-column",u="1 / 3",E.style.setProperty(o,u,i?"important":""),m(n,"class","settings svelte-m7hsn4"),m(I,"class","reset svelte-m7hsn4"),m(B,"class","start svelte-m7hsn4"),m(e,"class","wrap svelte-m7hsn4"),F=[f(p,"input",z),f(v,"change",t.input1_change_handler),f(x,"input",J),f(P,"change",t.input3_change_handler),f(I,"click",t.resetAll),f(B,"click",t.playNext)]},m(o,l){i(o,e,l),u(e,n),u(n,r),u(n,a),u(n,p),b(p,t.defaultDuration),u(n,$),u(n,g),u(g,v),v.checked=t.defaultPreCountEnabled,u(g,C),u(n,_),u(n,x),b(x,t.defaultPreCountDuration),u(n,y),u(n,E),u(E,P),P.checked=t.autoAdvance,u(E,D),u(E,w),u(e,A),u(e,I),u(e,L);for(let t=0;t<Q.length;t+=1)Q[t].m(e,null);u(e,O),u(e,B),u(B,j),T=!0},p(t,n){if(!G&&t.defaultDuration&&b(p,n.defaultDuration),G=!1,t.defaultPreCountEnabled&&(v.checked=n.defaultPreCountEnabled),!q&&t.defaultPreCountDuration&&b(x,n.defaultPreCountDuration),q=!1,T&&!t.defaultPreCountEnabled||k===(k=!n.defaultPreCountEnabled)||(x.disabled=k),t.autoAdvance&&(P.checked=n.autoAdvance),t.defaultDuration||t.defaultPreCountEnabled||t.defaultPreCountDuration||t.timers||t.currentIdx){let r;for(K=n.timers,r=0;r<K.length;r+=1){const o=R(n,K,r);Q[r]?(Q[r].p(t,o),M(Q[r],1)):(Q[r]=H(o),Q[r].c(),M(Q[r],1),Q[r].m(e,O))}for(S={r:0,c:[],p:S},r=K.length;r<Q.length;r+=1)U(r);S.r||o(S.c),S=S.p}T&&!t.labelStart||h(j,n.labelStart)},i(t){if(!T){for(let t=0;t<K.length;t+=1)M(Q[t]);T=!0}},o(t){Q=Q.filter(Boolean);for(let t=0;t<Q.length;t+=1)N(Q[t]);T=!1},d(t){t&&l(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(Q,t),o(F)}}}function K(t,e,n){let o,{name:r}=e,a=[{name:"a",component:null},{name:"b",component:null},{name:"c",component:null},{name:"d",component:null},{name:"e",component:null}],u=30,i=3,l=!1,c=!0;function d(){a[o].component.start()}function s(t){n("currentIdx",o=(o+1)%a.length),c&&t!=a.length-1&&d()}C(()=>{n("currentIdx",o=0)});let f;return t.$set=(t=>{"name"in t&&n("name",r=t.name)}),n("labelStart",f="GO"),{name:r,timers:a,currentIdx:o,defaultDuration:u,defaultPreCountDuration:i,defaultPreCountEnabled:l,autoAdvance:c,playNext:d,resetAll:function(){a.forEach(t=>t.component.reset()),n("currentIdx",o=0)},onTimerDone:s,labelStart:"GO",input0_input_handler:function(){u=p(this.value),n("defaultDuration",u)},input1_change_handler:function(){l=this.checked,n("defaultPreCountEnabled",l)},input2_input_handler:function(){i=p(this.value),n("defaultPreCountDuration",i)},input3_change_handler:function(){c=this.checked,n("autoAdvance",c)},timer_binding:function(t,e){a[e].component!==t&&k[t?"unshift":"push"](()=>{a[e].component=t,n("timers",a)})},done_handler:({i:t})=>s(t)}}return new class extends F{constructor(t){super(),T(this,t,K,J,a,["name"])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
